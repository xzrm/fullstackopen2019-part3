{"version":3,"sources":["services/ppl.js","components/person.js","components/notification.js","components/personForm.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Person","person","deletePerson","name","number","onClick","Notification","message","className","PersonForm","addPerson","handleNameChange","handleNumberChange","onSubmit","value","onChange","type","App","props","useState","persons","setPersons","newPerson","setNewPerson","query","setQuery","setMessage","setClassName","useEffect","personService","catch","err","console","log","peopleToShow","filter","toLowerCase","includes","filterPersons","event","target","preventDefault","newPersonObject","length","concat","setTimeout","error","window","confirm","find","updatedPerson","returnedPerson","map","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.40e62959.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\n/* for the static build of the front end in part 3 \r\nbaseUrl should be const baseUrl = 'api/persons'\r\n*/\r\n\r\nconst baseUrl = 'api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst del = (id) => {\r\n  axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, del }","import React from 'react'\r\n\r\nconst Person = ({ person, deletePerson }) => {\r\n  return (\r\n    <div>{person.name} {person.number}\r\n      <button onClick={deletePerson}>delete</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\n\r\nconst Notification = ({ message, className }) => {\r\n    return (\r\n      <div>\r\n        {message === null\r\n          ? <div></div>\r\n          : <div className={className}>{message}</div>}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default  Notification \r\n\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({ person, addPerson, handleNameChange, handleNumberChange}) => {\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={person.name} onChange={handleNameChange} name='newName' />\r\n        </div>\r\n        <div>\r\n          number: <input value={person.number} onChange={handleNumberChange} name='newNumber' />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default PersonForm","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/ppl'\r\nimport Person from './components/person'\r\nimport Notification from './components/notification'\r\nimport PersonForm from './components/personForm'\r\nimport './index.css'\r\n\r\n\r\n\r\nconst App = (props) => {\r\n\r\n  const [persons, setPersons] = useState([])\r\n  const [newPerson, setNewPerson] = useState({ \"name\": \"\", \"number\": \"\" })\r\n  const [query, setQuery] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n  const [className, setClassName] = useState('notification')\r\n\r\n\r\n  const deletePerson = (name, id) => {\r\n    if (window.confirm(`Delete ${name}?`)) {\r\n      personService\r\n        .del(id)\r\n      setPersons(persons.filter(person => person.id !== id))\r\n    }\r\n  }\r\n\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const newPersonObject = {\r\n      id: persons.length + 1, //poor practise\r\n      name: newPerson.name,\r\n      number: newPerson.number,\r\n    }\r\n\r\n\r\n    if (newPersonObject.name.length === 0) { return }\r\n\r\n    if (persons.filter(person =>\r\n      person.name === newPersonObject.name).length === 0) {\r\n\r\n      personService\r\n        .create(newPersonObject)\r\n        .then(newPerson => {\r\n          setPersons(persons.concat(newPerson))\r\n          setClassName('notification')\r\n          setMessage(`Added ${newPerson.name}`)\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          setClassName('error')\r\n          setMessage(`Something went wrong: ${error.response.data.error}`)\r\n          console.log(error.response)\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n        })\r\n    } else {\r\n      if (window.confirm(`${newPersonObject.name} is already added to phonebook, \r\n      replace the old number with a new one?`)) {\r\n        const person = persons.find(person => person.name === newPersonObject.name)\r\n        const updatedPerson = { ...person, number: newPersonObject.number }\r\n        personService\r\n          .update(person.id, updatedPerson)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.map(person =>\r\n              person.name !== newPersonObject.name\r\n                ? person\r\n                : returnedPerson))\r\n\r\n            setClassName('notification')\r\n            setMessage(`Upadated ${newPersonObject.name}`)\r\n\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n          .catch(err => {\r\n            setClassName('error')\r\n            setMessage(`${newPersonObject.name} was already removed from server`)\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n            setPersons(persons.filter(person =>\r\n              person.name !== newPersonObject.name))\r\n          })\r\n      }\r\n    }\r\n    setNewPerson({ \"name\": \"\", \"number\": \"\" })\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewPerson({\r\n      ...newPerson,\r\n      \"name\": event.target.value\r\n    })\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewPerson({\r\n      ...newPerson,\r\n      \"number\": event.target.value\r\n    })\r\n  }\r\n\r\n  const handleQueryChange = (event) => {\r\n    setQuery(event.target.value)\r\n  }\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(persons =>\r\n        setPersons(persons))\r\n      .catch(err => console.log(\"Could not GET data; \", err))\r\n  }, [])\r\n\r\n\r\n  const filterPersons = (query) => {\r\n    return persons.filter(person =>\r\n      person.name.toLowerCase().includes(query.toLowerCase()))\r\n  }\r\n\r\n  const peopleToShow = query === \"\"\r\n    ? persons\r\n    : filterPersons(query)\r\n\r\n  return (\r\n    <div>\r\n      <h2>My phonebook</h2>\r\n      <Notification message={message} className={className} />\r\n\r\n      <div>\r\n        filter shown with: <input value={query} onChange={handleQueryChange} />\r\n      </div>\r\n\r\n      <h2>add a new</h2>\r\n      <PersonForm person={newPerson}\r\n        addPerson={addPerson}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <div>\r\n        {peopleToShow.map(person =>\r\n          <Person\r\n            key={person.id}\r\n            person={person}\r\n            deletePerson={() => deletePerson(person.name, person.id)}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}