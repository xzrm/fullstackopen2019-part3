(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=t(14),l=t(2),i=t(3),m=t.n(i),f="api/persons",s=function(){return m.a.get(f).then((function(e){return e.data}))},d=function(e){return m.a.post(f,e).then((function(e){return e.data}))},b=function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){m.a.delete("".concat(f,"/").concat(e))},h=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("div",null,n.name," ",n.number,r.a.createElement("button",{onClick:t},"delete"))},v=function(e){var n=e.message,t=e.className;return r.a.createElement("div",null,null===n?r.a.createElement("div",null):r.a.createElement("div",{className:t},n))},E=function(e){var n=e.person,t=e.addPerson,a=e.handleNameChange,o=e.handleNumberChange;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n.name,onChange:a,name:"newName"})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:n.number,onChange:o,name:"newNumber"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))};t(37);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(t,!0).forEach((function(n){Object(u.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(e){var n=Object(a.useState)([]),t=Object(l.a)(n,2),o=t[0],c=t[1],u=Object(a.useState)({name:"",number:""}),i=Object(l.a)(u,2),m=i[0],f=i[1],g=Object(a.useState)(""),w=Object(l.a)(g,2),j=w[0],y=w[1],P=Object(a.useState)(null),C=Object(l.a)(P,2),N=C[0],k=C[1],S=Object(a.useState)("notification"),D=Object(l.a)(S,2),T=D[0],J=D[1];Object(a.useEffect)((function(){s().then((function(e){return c(e)})).catch((function(e){return console.log("Could not GET data; ",e)}))}),[]);var L=""===j?o:function(e){return o.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())}))}(j);return r.a.createElement("div",null,r.a.createElement("h2",null,"My phonebook"),r.a.createElement(v,{message:N,className:T}),r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:j,onChange:function(e){y(e.target.value)}})),r.a.createElement("h2",null,"add a new"),r.a.createElement(E,{person:m,addPerson:function(e){e.preventDefault();var n={id:o.length+1,name:m.name,number:m.number};if(0!==n.name.length){if(0===o.filter((function(e){return e.name===n.name})).length)d(n).then((function(e){c(o.concat(e)),J("notification"),k("Added ".concat(e.name)),setTimeout((function(){k(null)}),5e3)})).catch((function(e){J("error"),k("Something went wrong: ".concat(e.response.data.error)),console.log(e.response),setTimeout((function(){k(null)}),5e3)}));else if(window.confirm("".concat(n.name," is already added to phonebook, \n      replace the old number with a new one?"))){var t=o.find((function(e){return e.name===n.name})),a=O({},t,{number:n.number});b(t.id,a).then((function(e){c(o.map((function(t){return t.name!==n.name?t:e}))),J("notification"),k("Upadated ".concat(n.name)),setTimeout((function(){k(null)}),5e3)})).catch((function(e){J("error"),k("".concat(n.name," was already removed from server")),setTimeout((function(){k(null)}),5e3),c(o.filter((function(e){return e.name!==n.name})))}))}f({name:"",number:""})}},handleNameChange:function(e){f(O({},m,{name:e.target.value}))},handleNumberChange:function(e){f(O({},m,{number:e.target.value}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement("div",null,L.map((function(e){return r.a.createElement(h,{key:e.id,person:e,deletePerson:function(){return n=e.name,t=e.id,void(window.confirm("Delete ".concat(n,"?"))&&(p(t),c(o.filter((function(e){return e.id!==t})))));var n,t}})}))))};c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.40e62959.chunk.js.map